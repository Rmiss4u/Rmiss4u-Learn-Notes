p28~p33

![](../../assets/2021-12-04-22-49-17.png)

添加血条 创建UI

![](../../assets/2021-12-04-21-13-11.png)

双击打开后 对画布进行设计 将左上角progress bar拖下去设为血条

Text同理 可以作为文本实例

在Player中添加float的Health变量和MaxHealth变量(作为血量条)

并且将原本的Reset中的合并节点中 重新多重新定义

![](../../assets/2021-12-04-21-17-24.png)

在init初始化之中 将Health定义为MaxHealth满值血量

![](../../assets/2021-12-04-21-18-57.png)

在UI的Progress Bar下 添加对能量条浮动绑定创建函数

![](../../assets/2021-12-04-21-20-36.png)

将现有血量/最值血量相除可得血量百分比且输出到能量条中

![](../../assets/2021-12-04-21-21-31.png)

在Init初始化中 将UI节点连接 游戏中展现UI

![](../../assets/2021-12-04-21-23-16.png)

将Player中的Health和MaxHealth变量剪切到怪物的蓝图中 右键创建怪物中的变量

![](../../assets/2021-12-04-21-24-36.png)

按下P右键 创建开始事件初始化蓝图

![](../../assets/2021-12-04-21-26-40.png)

将PlayerUI复制一份给Enemy 修正颜色值位置等 给EnemyUI的能量条创建绑定 设定血量的蓝图UI

![](../../assets/2021-12-04-21-30-16.png)

在Enemy的时间中定义 写好的UI

![](../../assets/2021-12-04-21-31-29.png)

受伤检测 在之前的Player攻击触碰触发检测中 set到碰撞的怪物对象 存储为Enemy变量

![](../../assets/2021-12-04-21-33-19.png)

随后 在之后进行伤害判定 对象为Enemy 受到的伤害为Damage

![](../../assets/2021-12-04-21-34-34.png)

在Enemy设定中 先设定怪物此时存在(还活着) 定义变量is Alive

![](../../assets/2021-12-04-21-35-53.png)

添加受到伤害的事件 在怪物存在时 进行伤害判定

![](../../assets/2021-12-04-21-36-56.png)

随后在set后 与0进行比较 如果小于等于0则进行死亡操作(先空着)

![](../../assets/2021-12-04-21-37-52.png)

在Player中定义受伤蓝图 (Danage连接到与Health相减)

![](../../assets/2021-12-04-21-38-49.png)

虚幻引擎设置中 Maps&Modes (游戏和模式)打开时显示的map 当游戏打包出去第一次启动游戏的初始关卡

![](../../assets/2021-12-04-21-45-01.png)

游戏设定的默认模式(自定义)

![](../../assets/2021-12-04-21-46-00.png)

Enemy受伤状态分析

人物方向计算 

![](../../assets/2021-12-04-22-20-12.png)

![](../../assets/2021-12-04-22-22-15.png)

打印敌人的旋转值

![](../../assets/2021-12-04-22-25-16.png)

tick事件调用 最终打印出的是旋转角度(角度是以Enemy为时钟12点顺时针开始计算角度)

![](../../assets/2021-12-04-22-27-15.png)

此时蓝图宏观

![](../../assets/2021-12-04-22-33-01.png)

在小于等于50 大于等于-50之中 即为可视范围内

![](../../assets/2021-12-04-22-42-26.png)

最终 在Enemy视线内打印True 视线外打印False

![](../../assets/2021-12-04-22-43-15.png)

目前

![](../../assets/2021-12-04-22-47-58.png)
