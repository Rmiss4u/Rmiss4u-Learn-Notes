p34~p38

![](../../assets/2021-12-05-17-33-12.png)

开启HitDir事件判断方位

![](../../assets/2021-12-05-16-21-46.png)

建立分支 并且以方向存储变量

![](../../assets/2021-12-05-16-26-10.png)

LaunchForceRight LaunchForce JumpForce JumpForceRight四个变量

如果在前面 就以...来播放蒙太奇

![](../../assets/2021-12-05-16-28-07.png)

创建向后倒的蒙太奇后 修改该蒙太奇的插槽属性 随后在播放蒙太奇节点上 设置Anim Montage

![](../../assets/2021-12-05-16-28-56.png)

等待一段时间 销毁Enemy

![](../../assets/2021-12-05-16-30-34.png)

Enemy死亡动画后 让Enemy变成布娃娃形态(瘫软无力状态)

例如在角色的物理资源中 可以看到pelvis设定

![](../../assets/2021-12-05-16-32-08.png)

随后开启布娃娃系统动画 用Mesh模拟

![](../../assets/2021-12-05-16-33-33.png)

最后 删除胶囊体

![](../../assets/2021-12-05-16-33-53.png)

算上Damage计算

![](../../assets/2021-12-05-16-34-29.png)

测试后 重新修改节点

![](../../assets/2021-12-05-16-35-41.png)

最后将IsAlive设置为false 判定死亡

![](../../assets/2021-12-05-16-36-17.png)

Init中 默认Is Alive 是true

![](../../assets/2021-12-05-16-36-48.png)

将另外两个变量设为0

![](../../assets/2021-12-05-16-37-31.png)

在背面的节点

![](../../assets/2021-12-05-16-37-47.png)

血量大于0的动画  先让其暂停 进行设计

![](../../assets/2021-12-05-16-38-50.png)

最后在判定 在存活的情况下进行相应的判断

![](../../assets/2021-12-05-16-39-25.png)

在AttackData中创建一个Nam而变量的AttackName数组 攻击对象

随后在AttackTable中设定AttackName每次击中后播放的动画的攻击方向(用于播放Enemy相对应被击的播放动画 打击感)

![](../../assets/2021-12-05-16-43-11.png)

在数据读取的节点中 读取设定的变量

![](../../assets/2021-12-05-16-45-18.png)

随后在Enemy中获得Player中的变量 播放相应的动画

![](../../assets/2021-12-05-16-45-47.png)

将DamageCauser强制转换 变量设为Player

![](../../assets/2021-12-05-16-47-18.png)

在Enemy血量大于0的情况下的分支中 获取Player的AttackName

![](../../assets/2021-12-05-16-48-17.png)

随后设定switch的分支 并且修改相应四个变量 再与蒙太奇动画变量相连

![](../../assets/2021-12-05-16-49-57.png)

在向左攻击 向右攻击 向前攻击中 修改响应变量

![](../../assets/2021-12-05-16-52-06.png)

![](../../assets/2021-12-05-16-52-47.png)

相连且保存MonTage为变量

![](../../assets/2021-12-05-16-53-09.png)

随后 将受伤的动画设为蒙太奇 且修改动画插槽

![](../../assets/2021-12-05-16-53-55.png)

在set中 将蒙太奇选项设为相应的动画蒙太奇

![](../../assets/2021-12-05-16-55-02.png)

随后copy到另一个分支里 (背对的情况下) (所有数相反)

![](../../assets/2021-12-05-16-56-02.png)

最终连上Player Anim Montage

![](../../assets/2021-12-05-16-57-29.png)

用动画的蓝图

![](../../assets/2021-12-05-16-58-24.png)

人物受伤位移 蓝图分区注释

![](../../assets/2021-12-05-17-00-46.png)

自定义事件起飞 Launch 写入三轴向量 分别相乘向量再相加 输出最终被击飞的飞出向量的蓝图

![](../../assets/2021-12-05-17-03-32.png)

设定布尔值 是否在空中 Fling状态 在动画中调用通知 放在飞出去动画的那一帧

![](../../assets/2021-12-05-17-04-44.png)

在动画蓝图中的事件图标里调用 因此需要定义一个函数获取自身的蓝图

![](../../assets/2021-12-05-17-06-34.png)

动画事件蓝图

![](../../assets/2021-12-05-17-07-03.png)

主角受伤害动画 根据血量不同播放不同动画

![](../../assets/2021-12-05-17-21-04.png)

将受伤动画设为蒙太奇 血量低于0的时候 一定时间后销毁

![](../../assets/2021-12-05-17-21-48.png)

![](../../assets/2021-12-05-17-22-11.png)

因此 攻击事件触发时 需要判断角色是否存活

![](../../assets/2021-12-05-17-23-28.png)

![](../../assets/2021-12-05-17-24-18.png)

![](../../assets/2021-12-05-17-24-56.png)

![](../../assets/2021-12-05-17-25-12.png)

![](../../assets/2021-12-05-17-25-48.png)

![](../../assets/2021-12-05-17-26-16.png)

倒下后又起来了 播放蒙太奇是一个播放状态 并不是持续播放 因此需要持续播放 并且可以做一些动画组合

添加一个loop组合 并且双击 将其变色

![](../../assets/2021-12-05-17-31-09.png)

最后将一直播放loop后的动画

![](../../assets/2021-12-05-17-32-18.png)